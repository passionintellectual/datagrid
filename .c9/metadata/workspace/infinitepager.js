{"filter":false,"title":"infinitepager.js","tooltip":"/infinitepager.js","undoManager":{"mark":57,"position":57,"stack":[[{"start":{"row":15,"column":0},"end":{"row":15,"column":1},"action":"insert","lines":["c"],"id":350}],[{"start":{"row":15,"column":1},"end":{"row":15,"column":2},"action":"insert","lines":["l"],"id":351}],[{"start":{"row":15,"column":0},"end":{"row":15,"column":2},"action":"remove","lines":["cl"],"id":352},{"start":{"row":15,"column":0},"end":{"row":15,"column":14},"action":"insert","lines":["console.log();"]}],[{"start":{"row":15,"column":12},"end":{"row":15,"column":14},"action":"insert","lines":["''"],"id":353}],[{"start":{"row":15,"column":13},"end":{"row":15,"column":14},"action":"insert","lines":["i"],"id":354}],[{"start":{"row":15,"column":14},"end":{"row":15,"column":15},"action":"insert","lines":["n"],"id":355}],[{"start":{"row":15,"column":15},"end":{"row":15,"column":16},"action":"insert","lines":["f"],"id":356}],[{"start":{"row":15,"column":16},"end":{"row":15,"column":17},"action":"insert","lines":["i"],"id":357}],[{"start":{"row":15,"column":17},"end":{"row":15,"column":18},"action":"insert","lines":["n"],"id":358}],[{"start":{"row":15,"column":18},"end":{"row":15,"column":19},"action":"insert","lines":["i"],"id":359}],[{"start":{"row":15,"column":19},"end":{"row":15,"column":20},"action":"insert","lines":["t"],"id":360}],[{"start":{"row":15,"column":20},"end":{"row":15,"column":21},"action":"insert","lines":["e"],"id":361},{"start":{"row":15,"column":21},"end":{"row":15,"column":22},"action":"insert","lines":[" "]},{"start":{"row":15,"column":22},"end":{"row":15,"column":23},"action":"insert","lines":["p"]},{"start":{"row":15,"column":23},"end":{"row":15,"column":24},"action":"insert","lines":["a"]}],[{"start":{"row":15,"column":24},"end":{"row":15,"column":25},"action":"insert","lines":["g"],"id":362},{"start":{"row":15,"column":25},"end":{"row":15,"column":26},"action":"insert","lines":["e"]},{"start":{"row":15,"column":26},"end":{"row":15,"column":27},"action":"insert","lines":["r"]}],[{"start":{"row":15,"column":27},"end":{"row":15,"column":28},"action":"insert","lines":[" "],"id":363}],[{"start":{"row":15,"column":29},"end":{"row":15,"column":30},"action":"insert","lines":[","],"id":364}],[{"start":{"row":15,"column":30},"end":{"row":15,"column":31},"action":"insert","lines":[" "],"id":365}],[{"start":{"row":15,"column":31},"end":{"row":15,"column":32},"action":"insert","lines":["s"],"id":366}],[{"start":{"row":15,"column":32},"end":{"row":15,"column":33},"action":"insert","lines":["c"],"id":367}],[{"start":{"row":15,"column":33},"end":{"row":15,"column":34},"action":"insert","lines":["o"],"id":368}],[{"start":{"row":15,"column":34},"end":{"row":15,"column":35},"action":"insert","lines":["p"],"id":369}],[{"start":{"row":15,"column":35},"end":{"row":15,"column":36},"action":"insert","lines":["e"],"id":370}],[{"start":{"row":68,"column":36},"end":{"row":68,"column":37},"action":"insert","lines":["s"],"id":371}],[{"start":{"row":68,"column":37},"end":{"row":68,"column":38},"action":"insert","lines":["c"],"id":372},{"start":{"row":68,"column":38},"end":{"row":68,"column":39},"action":"insert","lines":["o"]},{"start":{"row":68,"column":39},"end":{"row":68,"column":40},"action":"insert","lines":["p"]}],[{"start":{"row":68,"column":40},"end":{"row":68,"column":41},"action":"insert","lines":["e"],"id":373}],[{"start":{"row":68,"column":41},"end":{"row":68,"column":42},"action":"insert","lines":["."],"id":374}],[{"start":{"row":68,"column":42},"end":{"row":68,"column":43},"action":"insert","lines":["a"],"id":375}],[{"start":{"row":68,"column":43},"end":{"row":68,"column":44},"action":"insert","lines":["p"],"id":376}],[{"start":{"row":68,"column":44},"end":{"row":68,"column":45},"action":"insert","lines":["p"],"id":377}],[{"start":{"row":68,"column":45},"end":{"row":68,"column":46},"action":"insert","lines":["l"],"id":378}],[{"start":{"row":68,"column":46},"end":{"row":68,"column":47},"action":"insert","lines":["y"],"id":379}],[{"start":{"row":68,"column":47},"end":{"row":68,"column":48},"action":"insert","lines":["("],"id":380}],[{"start":{"row":68,"column":48},"end":{"row":68,"column":49},"action":"insert","lines":["f"],"id":381}],[{"start":{"row":68,"column":49},"end":{"row":68,"column":50},"action":"insert","lines":["u"],"id":382}],[{"start":{"row":68,"column":50},"end":{"row":68,"column":51},"action":"insert","lines":["n"],"id":383}],[{"start":{"row":68,"column":51},"end":{"row":68,"column":52},"action":"insert","lines":["c"],"id":384}],[{"start":{"row":68,"column":52},"end":{"row":68,"column":53},"action":"insert","lines":["t"],"id":385},{"start":{"row":68,"column":53},"end":{"row":68,"column":54},"action":"insert","lines":["i"]}],[{"start":{"row":68,"column":54},"end":{"row":68,"column":55},"action":"insert","lines":["o"],"id":386}],[{"start":{"row":68,"column":55},"end":{"row":68,"column":56},"action":"insert","lines":["n"],"id":387}],[{"start":{"row":68,"column":56},"end":{"row":68,"column":57},"action":"insert","lines":["("],"id":388}],[{"start":{"row":68,"column":57},"end":{"row":68,"column":58},"action":"insert","lines":[")"],"id":389}],[{"start":{"row":68,"column":58},"end":{"row":68,"column":59},"action":"insert","lines":["{"],"id":390}],[{"start":{"row":68,"column":59},"end":{"row":69,"column":0},"action":"insert","lines":["",""],"id":391},{"start":{"row":69,"column":0},"end":{"row":69,"column":40},"action":"insert","lines":["                                        "]}],[{"start":{"row":71,"column":38},"end":{"row":72,"column":0},"action":"insert","lines":["",""],"id":392},{"start":{"row":72,"column":0},"end":{"row":72,"column":36},"action":"insert","lines":["                                    "]}],[{"start":{"row":72,"column":36},"end":{"row":72,"column":37},"action":"insert","lines":["}"],"id":393}],[{"start":{"row":72,"column":37},"end":{"row":72,"column":38},"action":"insert","lines":[")"],"id":394}],[{"start":{"row":68,"column":42},"end":{"row":68,"column":43},"action":"insert","lines":["$"],"id":395}],[{"start":{"row":68,"column":33},"end":{"row":68,"column":60},"action":"remove","lines":["   scope.$apply(function(){"],"id":396},{"start":{"row":68,"column":33},"end":{"row":68,"column":34},"action":"insert","lines":[" "]}],[{"start":{"row":72,"column":34},"end":{"row":72,"column":39},"action":"remove","lines":["  });"],"id":397},{"start":{"row":72,"column":34},"end":{"row":72,"column":35},"action":"insert","lines":[" "]}],[{"start":{"row":0,"column":0},"end":{"row":139,"column":8},"action":"remove","lines":["angular.module('gtpWebApp.core')","    .directive('infinitepager', ['$compile', '$timeout', '$parse', 'pagingService', 'guidService', function($compile, $timeout, $parse, pagingService, guidService) {","        return {","            restrict: 'AEC',","            priority: 1010,","            require: '^datagrid',","            template: '',","            link: {","                pre: function preLink(scope, element, attrs, controller, transclude) {","","                    // scope.repeatExpression = controller.repeatExpression.replace(' in ', ' in filtered = ( ');","                    // scope.repeatExpression += ') | myLimitTo:dgEnd:dgStart';","","                    scope.repeatExpression = controller.repeatExpression.replace(controller.repeatAttrs.rhs, ' filtered = (' + controller.repeatAttrs.rhs + ') | myLimitTo:dgEnd:dgStart ');","","console.log('infinite pager ', scope);","","                    scope.onIndexChanged = $parse(controller.onIndexChanged);","","                    scope.pagingMode = attrs.pagingMode;","","                    scope.paging = new pagingService(controller.pagingUniqueKey);","                    scope.collection = $parse(controller.repeatAttrs.rhs)(scope);","                    if (scope.collection) {","                        scope.collectionLength = scope.collection.length;","                        scope.paging.setCollectionLength(scope.collection.length);","                    }","","                    scope.$watchCollection(controller.repeatAttrs.rhs, function(collection) {","                        if (collection) {","","                            if (scope.pagingMode == 'server') {","                                scope.paging.setCollectionLength(collection.collectionLength);","                            }","                            else {","                                scope.paging.collectionLength = collection.length;","                            }","                        }","                    });","                    scope.block = controller.block;","                    scope.unBlock = controller.unBlock;","","","                    scope.onCurrentPageChanged = function(eventWrapper) {","                        var event = eventWrapper.info || eventWrapper;","                        //console.log('$scope.paging.currentPage', $scope.paging.currentPage);","                        //console.log('info onCurrentPageChanged received--> $currentPage', event);","                        //$scope.dgEnd += 1; //$scope.paging.pageSize;","                        // if (!$scope.$$phase) $scope.$apply();","","","                        switch (scope.pagingMode) {","                            case 'normal':","                                if (scope.collectionLength > event.extent.start) {","                                    scope.dgStart = event.extent.start;","","","                                }","                                break;","                            case 'infinite':","                                if (scope.collectionLength >= event.extent.end) {","                                    scope.dgEnd = event.extent.end;","                                }","                                break;","                            case 'server':","                                scope.block();","","                                if (scope.onIndexChanged) {","                                  ","                                        var prms = scope.onIndexChanged(scope, {","                                        event: event","                                    })","                                   ","                                    if (prms && prms.then) {","                                        prms.then(function(res) {","                                            scope.paging.collectionLength = res.collectionLength; //res.length;","                                            scope.dgEnd = res.collectionLength;","                                            scope.dgStart = 0;","                                            scope.unBlock();","                                        });","                                    }","                                }","                                break;","","                            default:","                                if (scope.collectionLength > event.extent.start) {","                                    scope.dgStart = event.extent.start;","                                }","                                // code","                        }","                        //$scope.dgEnd = event.extent.end;","                    }","","                    scope.onPageSizeChanged = function(pageSize) {","","","                        scope.dgStart = 0; //$scope.paging.pageSize;","                        scope.dgEnd = scope.paging.pageSize;","                        // if (!$scope.$$phase) $scope.$apply();","                    }","","                    scope.paging.currentPageChanged.then(function(result) {","                        scope.onCurrentPageChanged(result);","                    })","                    scope.paging.goTo(0);","                    if (!scope.paging.pageSize)","                        scope.paging.setSize(1);","","                },","                post: function postLink(scope, element, attrs, controller, transclude) {","                    // scope.paging = new pagingService(controller.pagingUniqueKey);","                    // scope.dgStart = 0;","                    // scope.dgEnd = scope.paging.pageSize;","                    // console.log('pagesize set initially ' + scope.paging.key, scope.paging.pageSize);","                },","            },","            controller: ['$scope', function($scope) {","                //console.log('infinite Pager controller--> $scope', $scope);","","","","                // $scope.$watch(function() {","                //     return $scope.paging.currentPage;","                // }, function(newValue, oldValue) {","                //     //if (newValue && newValue != oldValue) {","                //         $scope.onCurrentPageChanged($scope.paging.pageChangeEvent);","                //     // }","","                // }, true);","","","                // $scope.$watch('paging.pageSize', function(newValue, oldValue) {","                //   if (newValue.pageSize != oldValue.pageSize) {","                //     $scoppe.dgStart = 0;","                //     $scope.dgEnd = newValue.pageSize;","                //   }","                // }, true);","            }]","        }","    }]);"],"id":398},{"start":{"row":0,"column":0},"end":{"row":139,"column":8},"action":"insert","lines":["angular.module('gtpWebApp.core')","    .directive('infinitepager', ['$compile', '$timeout', '$parse', 'pagingService', 'guidService', function($compile, $timeout, $parse, pagingService, guidService) {","        return {","            restrict: 'AEC',","            priority: 1010,","            require: '^datagrid',","            template: '',","            link: {","                pre: function preLink(scope, element, attrs, controller, transclude) {","","                    // scope.repeatExpression = controller.repeatExpression.replace(' in ', ' in filtered = ( ');","                    // scope.repeatExpression += ') | myLimitTo:dgEnd:dgStart';","","                    scope.repeatExpression = controller.repeatExpression.replace(controller.repeatAttrs.rhs, ' filtered = (' + controller.repeatAttrs.rhs + ') | myLimitTo:dgEnd:dgStart ');","","console.log('infinite pager ', scope);","","                    scope.onIndexChanged = $parse(controller.onIndexChanged);","","                    scope.pagingMode = attrs.pagingMode;","","                    scope.paging = new pagingService(controller.pagingUniqueKey);","                    scope.collection = $parse(controller.repeatAttrs.rhs)(scope);","                    if (scope.collection) {","                        scope.collectionLength = scope.collection.length;","                        scope.paging.setCollectionLength(scope.collection.length);","                    }","","                    scope.$watchCollection(controller.repeatAttrs.rhs, function(collection) {","                        if (collection) {","","                            if (scope.pagingMode == 'server') {","                                scope.paging.setCollectionLength(collection.collectionLength);","                            }","                            else {","                                scope.paging.collectionLength = collection.length;","                            }","                        }","                    });","                    scope.block = controller.block;","                    scope.unBlock = controller.unBlock;","","","                    scope.onCurrentPageChanged = function(eventWrapper) {","                        var event = eventWrapper.info || eventWrapper;","                        //console.log('$scope.paging.currentPage', $scope.paging.currentPage);","                        //console.log('info onCurrentPageChanged received--> $currentPage', event);","                        //$scope.dgEnd += 1; //$scope.paging.pageSize;","                        // if (!$scope.$$phase) $scope.$apply();","","","                        switch (scope.pagingMode) {","                            case 'normal':","                                if (scope.collectionLength > event.extent.start) {","                                    scope.dgStart = event.extent.start;","","","                                }","                                break;","                            case 'infinite':","                                if (scope.collectionLength >= event.extent.end) {","                                    scope.dgEnd = event.extent.end;","                                }","                                break;","                            case 'server':","                                scope.block();","","                                if (scope.onIndexChanged) {","                                  ","                                        var prms = scope.onIndexChanged(scope, {","                                        event: event","                                    })","                                   ","                                    if (prms && prms.then) {","                                        prms.then(function(res) {","                                            scope.paging.collectionLength = res.collectionLength; //res.length;","                                            scope.dgEnd = res.collectionLength;","                                            scope.dgStart = 0;","                                            scope.unBlock();","                                        });","                                    }","                                }","                                break;","","                            default:","                                if (scope.collectionLength > event.extent.start) {","                                    scope.dgStart = event.extent.start;","                                }","                                // code","                        }","                        //$scope.dgEnd = event.extent.end;","                    }","","                    scope.onPageSizeChanged = function(pageSize) {","","","                        scope.dgStart = 0; //$scope.paging.pageSize;","                        scope.dgEnd = scope.paging.pageSize;","                        // if (!$scope.$$phase) $scope.$apply();","                    }","","                    scope.paging.currentPageChanged.then(function(result) {","                        scope.onCurrentPageChanged(result);","                    })","                    scope.paging.goTo(0);","                    if (!scope.paging.pageSize)","                        scope.paging.setSize(1);","","                },","                post: function postLink(scope, element, attrs, controller, transclude) {","                    // scope.paging = new pagingService(controller.pagingUniqueKey);","                    // scope.dgStart = 0;","                    // scope.dgEnd = scope.paging.pageSize;","                    // console.log('pagesize set initially ' + scope.paging.key, scope.paging.pageSize);","                },","            },","            controller: ['$scope', function($scope) {","                //console.log('infinite Pager controller--> $scope', $scope);","","","","                // $scope.$watch(function() {","                //     return $scope.paging.currentPage;","                // }, function(newValue, oldValue) {","                //     //if (newValue && newValue != oldValue) {","                //         $scope.onCurrentPageChanged($scope.paging.pageChangeEvent);","                //     // }","","                // }, true);","","","                // $scope.$watch('paging.pageSize', function(newValue, oldValue) {","                //   if (newValue.pageSize != oldValue.pageSize) {","                //     $scoppe.dgStart = 0;","                //     $scope.dgEnd = newValue.pageSize;","                //   }","                // }, true);","            }]","        }","    }]);"]}],[{"start":{"row":98,"column":25},"end":{"row":98,"column":26},"action":"remove","lines":["/"],"id":399}],[{"start":{"row":98,"column":24},"end":{"row":98,"column":25},"action":"remove","lines":["/"],"id":400}],[{"start":{"row":98,"column":30},"end":{"row":98,"column":31},"action":"remove","lines":["$"],"id":401}],[{"start":{"row":98,"column":45},"end":{"row":98,"column":46},"action":"remove","lines":["$"],"id":402}],[{"start":{"row":15,"column":0},"end":{"row":15,"column":4},"action":"insert","lines":["    "],"id":403}],[{"start":{"row":15,"column":4},"end":{"row":15,"column":8},"action":"insert","lines":["    "],"id":404}],[{"start":{"row":15,"column":8},"end":{"row":15,"column":12},"action":"insert","lines":["    "],"id":405}],[{"start":{"row":15,"column":12},"end":{"row":15,"column":16},"action":"insert","lines":["    "],"id":406}],[{"start":{"row":15,"column":16},"end":{"row":15,"column":20},"action":"insert","lines":["    "],"id":407}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":17,"column":65},"end":{"row":17,"column":65},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":20,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1441112134334,"hash":"03e28fe59b842e156472f4a09f4b8ff3a9c3eb31"}